<!--- Bar.stories.mdx --->

import { Meta, Story, Canvas } from "@storybook/addon-docs/blocks";

import { defaultArgTypes } from "./defaultArgTypes";
import { defaultArgs } from "./defaultArgs";
import { seriesArgTypes } from "../seriesArgTypes";
import { sales_records_dataset } from "../sales_records_dataset";
import { Chart, XAxis, YAxis, Bar, Bars } from "../../src/components";

export const barArgTypes = {
    ...defaultArgTypes,
};

<Meta title="XYCharts/2. Bar" component={Bar} argTypes={barArgTypes} />

export const BarTemplate = (args) => (
    <Chart {...args} data={sales_records_dataset}>
        <Bar x={args.x} y={args.y} color={args.color} animationDuration={args.animationDuration} />
        <XAxis fields={[args.x]} />
        <YAxis fields={[args.y]} />
    </Chart>
);

# Bar Component

The `<Bar>` component allows us to define a bar plot on our chart.

<Story
    name="Basic Bar"
    args={{
        ...defaultArgs,
        width: 800,
    }}
>
    {BarTemplate.bind({})}
</Story>

#### Scale

When you are using a Bar chart you may need help the chart by specifying the type of scale. You can do this by configuring your `<YAxis>` like so `<YAxis ... scaleType="band" />`

## Visual Styling

Most of the configuration for a `<Bar>` is similar to other plots. Currently the only styling property avaliable is the colour option.

<Story
    name="Bar Color configuration"
    args={{
        ...defaultArgs,
        width: 800,
        color: "orange",
    }}
>
    {BarTemplate.bind({})}
</Story>

## Multiple Series

There are three ways to go about defining multiple bar plots, depending on the type of bar chart you wish to produce.

-   Ratio Bars
-   Stacked Bars
-   Grouped Bars

### Ratio Charts

One way of combining Bars plots is to display one over the top of the other. This is useful if you want to show one value as a ratio of another.

export const RatioBarTemplate = (args) => (
    <div>
        <Chart {...args} data={sales_records_dataset}>
            <Bar x={args.x} y={args.y} color={args.color} animationDuration={args.animationDuration} />
            <Bar x={args.x2} y={args.y} color={args.color2} animationDuration={args.animationDuration} />
            <XAxis fields={[args.x, args.x2, args.x3]} />
            <YAxis fields={[args.y]} />
        </Chart>
    </div>
);

<Story
    name="Ratio Bars"
    args={{
        ...defaultArgs,
        width: 800,
        color: "#0076B3",
        color2: "#FF7F28",
        x2: "Unit Cost",
    }}
>
    {RatioBarTemplate.bind({})}
</Story>

### Stacked Charts

Another way to to combine bar plots is to stack them on top of each other. To stack bar plots you **must** use the `<Bars>` (plural) component and ensure that you set stacked field `<Bars ... stacked={true} />`.

The chart will attempt to warn you, but you should also set the `aggregate` field on your X Axis/Scale as otherwise the data will overflow of the top of the scale `<XAxis ... aggregate={true} />`.

export const StackedBarTemplate = (args) => (
    <div>
        <Chart {...args} data={sales_records_dataset}>
            <Bars y={args.y} xs={[args.x, args.x2]} animationDuration={args.animationDuration} stacked={true} />
            <XAxis fields={[args.x, args.x2, args.x3]} aggregate={true} />
            <YAxis fields={[args.y]} scaleType="band" />
        </Chart>
    </div>
);

<Story
    name="Stacked Bars"
    args={{
        ...defaultArgs,
        width: 800,
        x2: "Unit Cost",
    }}
>
    {StackedBarTemplate.bind({})}
</Story>

### Grouped Charts

Another way to to combine bar plots is to group them together in multiple series. To group bar plots you **must** use the `<Bars>` (plural) component and ensure that you set grouped field `<Bars ... grouped={true} />`.

export const GroupedBarTemplate = (args) => (
    <div>
        <Chart {...args} data={sales_records_dataset}>
            <Bars y={args.y} xs={[args.x, args.x2]} animationDuration={args.animationDuration} grouped={true} />
            <XAxis fields={[args.x, args.x2, args.x3]} aggregate={true} />
            <YAxis fields={[args.y]} scaleType="band" />
        </Chart>
    </div>
);

<Story
    name="Grouped Bars"
    args={{
        ...defaultArgs,
        height: 400,
        x2: "Unit Cost",
    }}
>
    {GroupedBarTemplate.bind({})}
</Story>
