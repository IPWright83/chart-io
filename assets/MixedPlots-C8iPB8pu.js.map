{"version":3,"file":"MixedPlots-C8iPB8pu.js","sources":["../../src/lib/components/Plots/MixedPlots.mdx"],"sourcesContent":["import { Story, Canvas, Meta } from \"@storybook/blocks\";\nimport * as MixedPlotStories from \"./MixedPlot.stories\";\n\n<Meta title=\"XYCharts/MixedPlots\" />\n\n# Mixed Plots\n\nIt is possible to mix plot types, although depending on the scales @chart-io has to do a little bit of manipulation to try and obtain a sufficient layout due to limitations in D3. To begin with it's worth understanding the difference between continuous and discrete plots.\n\nContinuous plots are those which have a linear scales without any gaps, examples are typically:\n\n-   Line\n-   Area\n-   Scatter\n\nDiscrete plots have a finite number of values and are typically:\n\n-   Column\n-   Bar\n\n## Mixing Continuous Plots\n\nWhen attempting to mix continuous plots, typically a linear type scale has been selected (`d3.scaleLinear` for example) and data will line up nicely and just work.\n\n<Canvas of={MixedPlotStories.MixedLineAreaScatter} />\n\n## Mixing Continuous Plots with a Band scale\n\nUsing a Band scale is preferred for Column & Bar plots (set by applying `scaleType=\"band\"` in your `<Axis>` or `<AutoScale>`) adding a continuous plot will attempt to offset the data to ensure it lines up with the columns or bars.\n\n> You can see this affect, by noting how the line does not meet the y-axis in this example.\n\n<Canvas of={MixedPlotStories.MixedScaleBand} />\n\n## Mixing a Discrete Plot with a Continuous Scale\n\nYou may prefer to use a continuous scale however. In the example above we can see how the axis labels are not formatted nicely. A `d3.scaleTime` does a much better job of formatting the labels automatically as per the first example, however this can cause bars to be cut off.\n\nWhen using a discrete plot such as a Column plot witha a linear scale, @chart-io will attempt to manually calculate the width of bars as it's unable to rely on the D3 scale functionality. This relies on the first 2 data points having valid values. If it is unable to do so it will display an error in the console.\n\n<Canvas of={MixedPlotStories.MixedColumnPlotsLinear} />\n\n> The reason for the manual calculation is Bar & Column plots typically need to use a [scaleBand](https://github.com/d3/d3-scale#band-scales). These scales aren't as powerful for plotting continuous data such as time, but they do provide the nice functions for padding/width of bars. So instead these are manually derived from the data.\n\nThe preferred approach for mixing Columns & other plots is to stick with a `band` scale and apply some custom formatting.\n\n## Custom formatting\n\nTherefore it's recommended to use D3 helper functions to manually define your `tickValues` that you want to present, and potentially the `tickFormat` as well. The next examples do this by providing the following two props:\n\n```javascript\nconst tickFormat = useCallback((tickValue, index) => {\n    return index % 3 !== 0 ?       // Only show every 3rd tick\n        null :\n        d3.utcFormat(\"%b\")(value); // Use the D3 short month format\n}, []);\n\nconst tickValues = useMemo(() => d3.utcMonths(...d3.extent(data.map(d => d[x]))), [data, x]);\n\n...\n<XAxis fields={args.x} scaleType=\"band\" tickFormat={tickFormat} tickValues={tickValues} />\n```\n\n## Example with a `<Column>` plot\n\n<Canvas of={MixedPlotStories.MixedColumnPlots} />\n\n## Example with a grouped `<Columns>` plot\n\n<Canvas of={MixedPlotStories.MixedGroupedColumnPlots} />\n\n## Example with a stacked `<Columns>` plot\n\n<Canvas of={MixedPlotStories.MixedStackedColumnPlots} />\n"],"names":["_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Meta","Canvas","MixedPlotStories.MixedLineAreaScatter","MixedPlotStories.MixedScaleBand","MixedPlotStories.MixedColumnPlotsLinear","MixedPlotStories.MixedColumnPlots","MixedPlotStories.MixedGroupedColumnPlots","MixedPlotStories.MixedStackedColumnPlots","MDXContent","MDXLayout"],"mappings":"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"}