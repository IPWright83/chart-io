{"version":3,"file":"Bar.stories-zhU0JEXE.js","sources":["../../src/lib/components/Plots/Bar/Bar.stories.tsx"],"sourcesContent":["import { themes } from \"@chart-io/core\";\n\nimport type { Meta } from \"@storybook/react\";\nimport { expect, fn, within } from \"@storybook/test\";\nimport React from \"react\";\n\nimport { sales_records_dataset } from \"../../../../data/sales_records_dataset\";\nimport { argTypes } from \"../../../../storybook/argTypes\";\nimport { createCanvasTest, createSVGTest } from \"../../../testUtils\";\nimport { XAxis, YAxis } from \"../../Axis\";\nimport { XYChart } from \"../../XYChart\";\nimport { Bar } from \"./Bar\";\nimport { Bars } from \"./Bars\";\n\nimport { uniqBy } from \"lodash\";\n\nconst { width, height, margin, useCanvas, theme, color } = argTypes;\n\nexport default {\n  title: \"XYCharts/Bar\",\n  component: Bar,\n  parameters: {\n    docs: {\n      transformSource: (src) => {\n        src = src.replace(/data={\\[.*?\\]}/gs, \"data={[ ...dataset ]}\");\n        src = src.replaceAll(/undefined,?/g, \"\");\n        src = src.replace(/^\\s*\\n/gm, \"\");\n        return src;\n      },\n    },\n    chromatic: { delay: 300 },\n  },\n  args: {\n    onClick: fn(),\n    onMouseOver: fn(),\n    onMouseOut: fn(),\n  },\n  argTypes: {\n    useCanvas,\n    width,\n    height,\n    theme,\n    color,\n    leftMargin: margin,\n    rightMargin: margin,\n    topMargin: margin,\n    bottomMargin: margin,\n  },\n} as Meta<typeof Bar>;\n\nconst data = uniqBy(sales_records_dataset, (d) => d[\"Item Type\"]);\n\nconst BarTemplate = (args) => (\n  <XYChart\n    data={data}\n    plotMargin={{\n      left: args.leftMargin,\n      right: args.rightMargin,\n      top: args.topMargin,\n      bottom: args.bottomMargin,\n    }}\n    width={args.width}\n    height={args.height}\n    animationDuration={args.animationDuration}\n    theme={args.theme}\n    useCanvas={args.useCanvas}\n    onClick={args.onClick}\n    onMouseOver={args.onMouseOver}\n    onMouseOut={args.onMouseOut}\n  >\n    <YAxis fields={[args.y]} scaleType=\"band\" showGridlines={false} />\n    <XAxis fields={[args.x, args.x2, args.x3]} />\n    <Bar x={args.x} y={args.y} color={args.color} />\n    {args.x2 && <Bar x={args.x2} y={args.y} color={args.color2} />}\n  </XYChart>\n);\n\nconst BarsTemplate = (args) => (\n  <XYChart\n    data={data}\n    plotMargin={{\n      left: args.leftMargin,\n      right: args.rightMargin,\n      top: args.topMargin,\n      bottom: args.bottomMargin,\n    }}\n    width={args.width}\n    height={args.height}\n    animationDuration={args.animationDuration}\n    useCanvas={args.useCanvas}\n    theme={args.theme}\n    onClick={args.onClick}\n    onMouseOver={args.onMouseOver}\n    onMouseOut={args.onMouseOut}\n  >\n    <YAxis fields={[args.y]} scaleType=\"band\" showGridlines={false} />\n    <XAxis fields={[args.x, args.x2, args.x3]} aggregate={args.stacked} />\n    <Bars\n      y={args.y}\n      xs={[args.x, args.x2]}\n      grouped={args.grouped}\n      stacked={args.stacked}\n    />\n  </XYChart>\n);\n\nexport const Basic = {\n  name: \"Basic Plot\",\n  render: BarTemplate,\n  args: {\n    useCanvas: false,\n    width: 800,\n    height: 500,\n    animationDuration: 250,\n    color: \"#99C1DC\",\n    color2: \"#fc998e\",\n    theme: themes.light,\n    leftMargin: 120,\n    rightMargin: 40,\n    topMargin: 40,\n    bottomMargin: 40,\n    x: \"Unit Price\",\n    y: \"Item Type\",\n  },\n  play: createSVGTest(\"rect.bar\", { clientX: 107, clientY: 396 }),\n};\n\nexport const Color = {\n  name: \"Custom Color\",\n  render: BarTemplate,\n  args: {\n    ...Basic.args,\n    color: \"orange\",\n  },\n};\n\nexport const Canvas = {\n  name: \"Using Canvas\",\n  render: BarTemplate,\n  args: {\n    ...Basic.args,\n    useCanvas: true,\n  },\n  play: createCanvasTest({ clientX: 245, clientY: 455 }),\n};\n\nexport const Ratio = {\n  name: \"Ratio Bars\",\n  render: BarTemplate,\n  args: {\n    ...Basic.args,\n    x2: \"Unit Cost\",\n    theme: {\n      ...themes.light,\n      series: {\n        ...themes.light.series,\n        opacity: 1,\n      },\n    },\n  },\n};\n\nexport const Stacked = {\n  name: \"Stacked Bars\",\n  render: BarsTemplate,\n  args: {\n    ...Basic.args,\n    x2: \"Unit Cost\",\n    stacked: true,\n  },\n  play: createSVGTest(\"rect.bar\", { clientX: 107, clientY: 396 }),\n};\n\nexport const Grouped = {\n  name: \"Grouped Bars\",\n  render: BarsTemplate,\n  args: {\n    ...Basic.args,\n    x2: \"Unit Cost\",\n    grouped: true,\n  },\n  play: createSVGTest(\"rect.bar\", { clientX: 107, clientY: 396 }),\n};\n"],"names":["width","height","margin","useCanvas","theme","color","argTypes","Bar_stories","title","component","Bar","parameters","docs","transformSource","src","replace","replaceAll","chromatic","delay","args","onClick","fn","onMouseOver","onMouseOut","leftMargin","rightMargin","topMargin","bottomMargin","data","uniqBy","sales_records_dataset","d","BarTemplate","jsxs","XYChart","left","right","top","bottom","animationDuration","jsx","YAxis","y","XAxis","x","x2","x3","color2","BarsTemplate","stacked","Bars","grouped","Basic","name","render","themes","light","play","createSVGTest","clientX","clientY","Color","Canvas","createCanvasTest","Ratio","series","opacity","Stacked","Grouped","source","originalSource"],"mappings":"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"}