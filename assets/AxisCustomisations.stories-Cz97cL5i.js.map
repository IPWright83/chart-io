{"version":3,"file":"AxisCustomisations.stories-Cz97cL5i.js","sources":["../../src/lib/components/Axis/Axis/AxisCustomisations.stories.tsx"],"sourcesContent":["import { chartSelectors, d3, IState } from \"@chart-io/core\";\n\nimport React, { useEffect, useRef } from \"react\";\nimport { useSelector } from \"react-redux\";\n\nimport { Chart } from \"../../Chart\";\nimport { XScale } from \"../../Scale\";\nimport { XAxis } from \"../XAxis\";\nimport { Axis } from \"./Axis\";\nimport { axisData } from \"./axisData\";\n\nimport \"./AxisCustomisations.css\";\n\nexport default {\n  title: \"Components/Axis/Customization\",\n  component: Axis,\n  parameters: {\n    docs: {\n      transformSource: (src) => {\n        src = src.replace(/data={\\[.*?\\]}/gs, \"data={[ ...dataset ]}\");\n        src = src.replaceAll(/undefined,?/g, \"\");\n        src = src.replace(/^\\s*\\n/gm, \"\");\n        return src;\n      },\n    },\n    chromatic: { delay: 300 },\n  },\n};\n\n// eslint-disable-next-line\nconst CustomTimeAxis = ({ fields }) => {\n  const axis = useRef(null);\n\n  const field = fields[0];\n  const scale = useSelector((s: IState) =>\n    chartSelectors.scales.getScale(s, field, \"plot\"),\n  );\n\n  useEffect(() => {\n    if (axis.current && scale) {\n      const selection = d3.select(axis.current);\n\n      // Create the D3 axis renderer\n      const timeFormat = d3.timeFormat(\"%H:%M\");\n      const d3Axis = d3\n        .axisBottom(scale as d3.AxisScale<d3.AxisDomain>)\n        .ticks(d3.timeHour.every(1))\n        .tickSizeInner(30)\n        .tickSizeOuter(30)\n        .tickFormat((value: Date, index) =>\n          index % 3 === 0 ? timeFormat(value) : null,\n        );\n\n      // Set some scale props\n      d3Axis.scale(scale as d3.AxisScale<d3.AxisDomain>);\n\n      // Render the axis\n      selection.call(d3Axis);\n    }\n  }, [scale]);\n\n  return <g className=\"customAxis\" ref={axis} />;\n};\n\nconst CustomAxisTemplate = (args) => (\n  <Chart {...args} data={axisData}>\n    <XScale fields={args.fields} scaleType=\"time\" />\n    <CustomTimeAxis fields={args.fields} />\n  </Chart>\n);\n\nconst HorizontalAxisTemplate = (args) => (\n  <Chart {...args} data={axisData}>\n    <XAxis\n      fields={args.fields}\n      tickSizeInner={args.tickSizeInner}\n      tickSizeOuter={args.tickSizeOuter}\n      tickPadding={args.tickPadding}\n      showGridlines={args.showGridlines}\n      title={args.title}\n      position={args.position}\n    />\n  </Chart>\n);\n\nexport const OuterTickSize = {\n  name: \"Outer Tick Size\",\n  render: HorizontalAxisTemplate,\n  args: {\n    position: \"bottom\",\n    fields: [\"integerValue\"],\n    height: 100,\n    width: 800,\n    tickSizeOuter: 40,\n    showGridlines: false,\n  },\n};\n\nexport const InnerTickSize = {\n  name: \"Inner Tick Size\",\n  render: HorizontalAxisTemplate,\n  args: {\n    position: \"bottom\",\n    fields: [\"integerValue\"],\n    height: 100,\n    width: 800,\n    tickSizeInner: 20,\n    showGridlines: false,\n  },\n};\n\nexport const TickPadding = {\n  name: \"Tick Padding\",\n  render: HorizontalAxisTemplate,\n  args: {\n    position: \"bottom\",\n    fields: [\"integerValue\"],\n    height: 100,\n    width: 800,\n    tickPadding: 20,\n    showGridlines: false,\n  },\n};\n\nexport const Gridlines = {\n  name: \"Gridlines\",\n  render: HorizontalAxisTemplate,\n  args: {\n    position: \"bottom\",\n    fields: [\"integerValue\"],\n    height: 200,\n    width: 800,\n    tickPadding: 20,\n    showGridlines: true,\n  },\n};\n\nexport const FullyCustomAxis = {\n  name: \"Using a Custom Axis Component\",\n  render: CustomAxisTemplate,\n  args: {\n    position: \"bottom\",\n    fields: [\"dateTimeValue\"],\n    height: 50,\n    width: 800,\n  },\n};\n"],"names":["AxisCustomisations_stories","title","component","Axis","parameters","docs","transformSource","src","replace","replaceAll","chromatic","delay","CustomTimeAxis","fields","axis","useRef","field","scale","useSelector","s","chartSelectors","scales","getScale","useEffect","current","selection","d3","select","timeFormat","d3Axis","axisBottom","ticks","timeHour","every","tickSizeInner","tickSizeOuter","tickFormat","value","index","call","jsx","CustomAxisTemplate","args","jsxs","Chart","axisData","XScale","HorizontalAxisTemplate","XAxis","tickPadding","showGridlines","position","OuterTickSize","name","render","height","width","InnerTickSize","TickPadding","Gridlines","FullyCustomAxis","source","originalSource"],"mappings":"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"}