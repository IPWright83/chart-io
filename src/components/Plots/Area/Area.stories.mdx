<!--- Area.stories.mdx --->

import { Meta, Story, Canvas } from "@storybook/addon-docs/blocks";

import { seriesArgTypes } from "../../../../stories/seriesArgTypes";
import { commonDefaultArgs } from "../../../../stories/commonDefaultArgs";
import { commonDefaultArgTypes } from "../../../../stories/commonDefaultArgTypes";
import { sales_records_dataset } from "../../../../data/sales_records_dataset";
import { streamData } from "../../../../data/stream_data";
import { Area } from "./Area";
import { Areas } from "./Areas";
import { Chart } from "../../Chart";
import { XAxis, YAxis } from "../../Axis";

export const defaultArgs = {
    ...commonDefaultArgs,
    x: "Order Date",
    y: "Total Revenue",
};

export const lineArgTypes = {
    ...commonDefaultArgTypes,
    x: seriesArgTypes,
    y: seriesArgTypes,
};

<Meta title="XYCharts/Area Plots" component={Area} argTypes={lineArgTypes} />

export const AreaTemplate = (args) => (
    <Chart {...args} data={sales_records_dataset}>
        <YAxis fields={[args.y]} />
        <XAxis fields={[args.x]} showGridlines={false} />
        <Area
            x={args.x}
            y={args.y}
            radius={args.radius}
            color={args.color}
            animationDuration={args.animationDuration}
        />
    </Chart>
);

# Area Component

The `<Area>` component allows us to define an area plot on our chart.

<Story
    name="Basic Area"
    args={{
        ...defaultArgs,
        width: 800,
    }}
>
    {AreaTemplate.bind({})}
</Story>

### Stream Graph

export const StreamAreaTemplate = (args) => (
    <Chart {...args} data={sales_records_dataset}>
        <YAxis fields={[args.y, args.y2]} />
        <XAxis fields={[args.x]} showGridlines={false} />
        <Area
            x={args.x}
            y={args.y}
            y2={args.y2}
            radius={args.radius}
            color={args.color}
            animationDuration={args.animationDuration}
        />
    </Chart>
);

The `<Area>` component also allows us to represent a Stream plot.

<Story
    name="Basic Stream"
    args={{
        ...defaultArgs,
        y2: "Total Cost",
        width: 800,
    }}
>
    {StreamAreaTemplate.bind({})}
</Story>

## Visual Styling

Most of the configuration for a `<Area>` is similar to other plots. Currently the only styling property avaliable is the colour option.

<Story
    name="Area Color configuration"
    args={{
        ...defaultArgs,
        width: 800,
        color: "orange",
    }}
>
    {AreaTemplate.bind({})}
</Story>

## Multiple Series

There are two ways to combine multiple area plots, either:

-   Overlapping Areas
-   Stacked Areas

### Overlapping Areas

There are two ways to go about defining multiple area plots for overlapping. The simplest way is to use the `<Areas>` (plural) component. The `<Areas>` component allows us to define multiple series at once and takes care of automaticallying layering and assigning colors.

The long hand way is to define each `<Area>`, and configure with a colour manually. The only advantage to this approach is if you wish to control other settings (such as events) differently between the plots.

The results of either approach, render in exactly the same way:

export const AreasTemplate = (args) => (
    <Chart {...args} data={sales_records_dataset}>
        <YAxis fields={[args.y, args.y2, args.y3]} />
        <XAxis fields={[args.x]} showGridlines={false} />
        <Areas x={args.x} ys={[args.y, args.y2, args.y3]} animationDuration={args.animationDuration} />
    </Chart>
);

export const MultipleAreaTemplate = (args) => (
    <Chart {...args} data={sales_records_dataset}>
        <YAxis fields={[args.y, args.y2, args.y3]} />
        <XAxis fields={[args.x]} showGridlines={false} />
        <Area x={args.x} y={args.y} color={args.color} animationDuration={args.animationDuration} />
        <Area x={args.x} y={args.y2} color={args.color2} animationDuration={args.animationDuration} />
        <Area x={args.x} y={args.y3} color={args.color3} animationDuration={args.animationDuration} />
    </Chart>
);

<Canvas>
    <Story
        name="Multiple Series - Areas"
        args={{
            ...defaultArgs,
            width: 400,
            y2: "Total Cost",
            y3: "Total Profit",
        }}
    >
        {AreasTemplate.bind({})}
    </Story>
    <Story
        name="Multiple Series - Area"
        args={{
            ...defaultArgs,
            width: 400,
            color2: "#FF7F28",
            color3: "#00A230",
            y2: "Total Cost",
            y3: "Total Profit",
        }}
    >
        {MultipleAreaTemplate.bind({})}
    </Story>
</Canvas>

### Stacked Charts

Another way to to combine area plots is to stack them on top of each other. To stack area plots you **must** use the `<Areas>` (plural) component and ensure that you set stacked field `<Areas ... stacked={true} />`.

The chart will attempt to warn you, but you should also set the `aggregate` field on your X Axis/Scale as otherwise the data will overflow of the top of the scale `<XAxis ... aggregate={true} />`.

export const StackedAreaTemplate = (args) => (
    <div>
        <Chart {...args} data={sales_records_dataset}>
            <YAxis fields={[args.y, args.y2, args.y3]} aggregate={true} />
            <XAxis fields={[args.x]} showGridlines={false} />
            <Areas
                x={args.x}
                ys={[args.y, args.y2, args.y3]}
                animationDuration={args.animationDuration}
                stacked={args.stacked}
            />
        </Chart>
    </div>
);

<Story
    name="Stacked Areas"
    args={{
        stacked: true,
        ...defaultArgs,
        width: 800,
        y2: "Total Cost",
        y3: "Total Profit",
    }}
>
    {StackedAreaTemplate.bind({})}
</Story>
